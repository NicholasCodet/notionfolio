<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dribbble Projects</title>
    <style>
        /* CSS styles for project display */
    </style>
</head>
<body>
    <h1>My Dribbble Projects</h1>
    <div id="projects-container">Loading projects...</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const DRIBBBLE_API_TOKEN = process.env.DRIBBBLE_API_TOKEN;
        
            fetch(`https://api.dribbble.com/v2/user/shots?access_token=${DRIBBBLE_API_TOKEN}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    const projectsContainer = document.getElementById('projects-container');
                    projectsContainer.innerHTML = ''; // Clear loading text

                    if (data && Array.isArray(data)) {
                        data.forEach(project => {
                            const projectElement = document.createElement('div');
                            projectElement.classList.add('project');
                            projectElement.innerHTML = `
                                <img src="${project.images.hidpi || project.images.normal}" alt="${project.title}">
                                <h2>${project.title}</h2>
                                <p>${project.description || 'No description'}</p>
                                <a href="${project.html_url}" target="_blank">View on Dribbble</a>
                            `;
                            projectsContainer.appendChild(projectElement);
                        });
                    } else {
                        projectsContainer.innerHTML = 'No projects found.';
                    }
                })
                .catch(error => {
                    console.error('Error fetching projects:', error);
                    document.getElementById('projects-container').innerHTML = 'Failed to load projects.';
                });
        });
    </script>
</body>
</html>
